<?php class Controller_Concepts_Moderation extends Controller_Template{	protected $user_id = null;	protected $user_groups = null;	public function before()	{		$this->template = 'moderator/template';		parent::before();				$this->user_groups = Auth::get_groups();			}			public function action_create($id = null)	{		if ($this->user_groups &&				!Auth::acl()->has_access(						array('concepts', array('create')),						$this->user_groups[0]))		{			Response::redirect('/');		}							}		public function action_edit($id = null)	{		if ($this->user_groups &&				!Auth::acl()->has_access(						array('concepts', array('update')),						$this->user_groups[0]))		{			Response::redirect('/');		}					}		//TODO archive notes?	public function action_delete($id = null)	{		if ($this->user_groups &&				!Auth::acl()->has_access(						array('concepts', array('delete')),						$this->user_groups[0]))		{			Response::redirect('/');		}			if ($concepts = Model_Concept::find($id))		{			$concepts->delete();						Session::set_flash('notice', 'Deleted concept #' . $id);		}		else		{			Session::set_flash('error', 'Could not delete concept #' . $id);		}		Response::redirect('concepts');	}}